<!-- ===========================
     ACCESSIBILITY PANEL (HTML)
=========================== -->
<div class="accessibility-toggle" aria-haspopup="true" aria-expanded="false">
  ⚙ Accessibility
</div>

<div class="accessibility-panel" aria-label="Accessibility Options">
  <h3>Accessibility Options</h3>

  <label>
    <input type="checkbox" id="toggle-cb-safe">
    Colorblind‑Safe Mode
  </label>

  <label>
    <input type="checkbox" id="toggle-reduced-glow">
    Reduced Glow Mode
  </label>

  <label>
    <input type="checkbox" id="toggle-high-contrast">
    High Contrast Mode
  </label>

  <label>
    <input type="checkbox" id="toggle-neon-mode">
    Neon Mode
  </label>
</div>

<!-- ===========================
     ACCESSIBILITY PANEL (CSS)
=========================== -->
<style>
/* Floating button */
.accessibility-toggle {
  position: fixed;
  top: 20px;
  left: 20px;
  background: #111;
  color: #fff;
  padding: 10px 14px;
  border: 1px solid var(--accent);
  border-radius: 6px;
  cursor: pointer;
  z-index: 9999;
  font-size: 0.9rem;
  transition: 0.2s ease;
}

.accessibility-toggle:hover {
  background: var(--accent);
  color: #000;
}

/* Panel container */
.accessibility-panel {
  position: fixed;
  top: 70px;      
  left: 20px;
  background: #111;
  border: 1px solid var(--accent);
  border-radius: 8px;
  padding: 15px;
  width: 220px;
  display: none;
  z-index: 9999;
  box-shadow: 0 0 10px rgba(194, 24, 240, 0.4);
}

.accessibility-panel h3 {
  font-family: var(--font-heading);
  font-size: 1rem;
  margin-bottom: 10px;
  color: var(--accent-glow);
}

.accessibility-panel label {
  display: block;
  margin-bottom: 10px;
  font-size: 0.9rem;
  cursor: pointer;
}

.reset-btn {
  margin-top: 10px;
  width: 100%;
  padding: 8px;
  background: #222;
  color: #fff;
  border: 1px solid var(--accent);
  border-radius: 4px;
  cursor: pointer;
  transition: 0.2s ease;
}

.reset-btn:hover {
  background: var(--accent);
  color: #000;
}

/* Reduced Glow Mode */
body.reduced-glow h1,
body.reduced-glow h2,
body.reduced-glow h3 {
  text-shadow: none !important;
}
body.reduced-glow .link-button,
body.reduced-glow .song-card,
body.reduced-glow .flag-row img {
  box-shadow: none !important;
  filter: none !important;
}

/* High Contrast Mode */
body.high-contrast {
  background: #000 !important;
  color: #fff !important;
}
body.high-contrast a {
  color: #fff !important;
  text-decoration: underline;
}
body.high-contrast .song-card {
  background: #000 !important;
  border-left-color: #fff !important;
}
</style>

<!-- ===========================
     ACCESSIBILITY PANEL (JS)
=========================== -->
<script>
const panelBtn = document.querySelector('.accessibility-toggle');
const panel = document.querySelector('.accessibility-panel');

panelBtn.addEventListener('click', () => {
  const isOpen = panel.style.display === 'block';
  panel.style.display = isOpen ? 'none' : 'block';
  panelBtn.setAttribute('aria-expanded', !isOpen);
});

/* Load saved preferences */
const modes = ['cb-safe', 'reduced-glow', 'high-contrast', 'neon-mode'];
modes.forEach(mode => {
  if (localStorage.getItem(mode) === 'true') {
    document.body.classList.add(mode);
    const checkbox = document.getElementById(`toggle-${mode}`);
    if (checkbox) checkbox.checked = true;
  }
});

/* Toggle logic */
function toggleMode(mode) {
  const checkbox = document.getElementById(`toggle-${mode}`);
  checkbox.addEventListener('change', () => {
    if (checkbox.checked) {
      document.body.classList.add(mode);
      localStorage.setItem(mode, 'true');
    } else {
      document.body.classList.remove(mode);
      localStorage.setItem(mode, 'false');
    }
  });
}

toggleMode('cb-safe');
toggleMode('reduced-glow');
toggleMode('high-contrast');
toggleMode('neon-mode');
</script>